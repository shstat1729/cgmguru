% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cgmguru-functions-docs.R
\name{detect_hypoglycemic_events}
\alias{detect_hypoglycemic_events}
\title{Detect Hypoglycemic Events}
\arguments{
\item{new_df}{A dataframe containing CGM data with columns: id, time, gl}

\item{reading_minutes}{Time interval between readings in minutes (optional)}

\item{dur_length}{Minimum duration in minutes for event classification (default: 120)}

\item{end_length}{End length criteria in minutes (default: 15)}

\item{start_gl}{Starting glucose threshold in mg/dL (default: 70)}
}
\value{
A list containing:
\itemize{
  \item \code{events_total}: Tibble with summary statistics per subject (id, total_events, avg_ep_per_day)
  \item \code{events_detailed}: Tibble with detailed event information (id, start_time, start_glucose, end_time, end_glucose, start_indices, end_indices)
}
}
\description{
Identifies and segments hypoglycemic events in CGM data based on specified
glucose thresholds and duration criteria aligned with international consensus 
CGM metrics (Battelino et al., 2023). Events are detected when glucose
falls below the start threshold for the minimum duration and ends when glucose
rises above the end threshold for the specified end length.
}
\examples{
# Load sample data
library(iglu)
data(example_data_5_subject)
data(example_data_hall)

# Level 1 Hypoglycemia Event (≥15 consecutive min of <70 mg/dL)
hypo_lv1 <- detect_hypoglycemic_events(
  example_data_5_subject, 
  start_gl = 70, 
  dur_length = 15, 
  end_length = 15
)
print(hypo_lv1$events_total)

# Level 2 Hypoglycemia Event (≥15 consecutive min of <54 mg/dL)
hypo_lv2 <- detect_hypoglycemic_events(
  example_data_5_subject, 
  start_gl = 54, 
  dur_length = 15, 
  end_length = 15
)

# Extended Hypoglycemia Event (default parameters)
hypo_extended <- detect_hypoglycemic_events(example_data_5_subject)

# Analysis on larger dataset
large_hypo <- detect_hypoglycemic_events(example_data_hall, start_gl = 70, dur_length = 15, end_length = 15)
print(paste("Total hypoglycemic events:", sum(large_hypo$events_total$total_events)))

# Compare Level 1 vs Level 2 hypoglycemia
cat("Level 1 events:", sum(hypo_lv1$events_total$total_events), "\n")
cat("Level 2 events:", sum(hypo_lv2$events_total$total_events), "\n")
}
